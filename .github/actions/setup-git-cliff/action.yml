name: 'Setup git-cliff'
description: 'Install git-cliff for changelog generation'

inputs:
  version:
    description: 'git-cliff version'
    required: false
    default: '2.7.0'

runs:
  using: 'composite'
  steps:
    - name: Download git-cliff
      shell: bash
      run: |
        wget -q "https://github.com/orhun/git-cliff/releases/download/v${{ inputs.version }}/git-cliff-${{ inputs.version }}-x86_64-unknown-linux-gnu.tar.gz" -O git-cliff.tar.gz
        tar -xzf git-cliff.tar.gz
        sudo mv "git-cliff-${{ inputs.version }}/git-cliff" /usr/local/bin/
        rm -rf git-cliff.tar.gz "git-cliff-${{ inputs.version }}"

    - name: Verify installation
      shell: bash
      run: git-cliff --version
